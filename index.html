<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trans HRT and Skin Research Papers</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</head>
<body class="bg-gray-50">
    <div class="max-w-4xl mx-auto p-4 sm:p-6">
        <h1 class="text-2xl sm:text-3xl font-bold mb-6">Trans HRT and Skin Research Papers</h1>
        
        <input 
            type="text" 
            id="searchInput" 
            placeholder="Search papers..." 
            class="w-full p-2 mb-6 border rounded-lg"
        >

        <div id="papers" class="space-y-6">
            <!-- Papers will be inserted here -->
        </div>
    </div>

    <script>
        // [Previous helper functions remain the same]

        function createPaperHTML(paper) {
            const title = escapeHTML(paper.Title || '');
            const year = escapeHTML(paper['Publication Year'] || '');
            const plainExplanation = escapeHTML(paper['Plain english explanation of abstract (AI generated)'] || '');
            const abstract = escapeHTML(paper.ABSTRACT_TEXT || '');
            const pubTitle = escapeHTML(paper['Publication Title'] || '');
            const url = paper.Url ? escapeHTML(paper.Url) : '';
            
            return `
                <div class="border rounded-lg p-4 sm:p-6 bg-white shadow-sm">
                    <div class="flex flex-wrap justify-between items-start mb-2">
                        ${url ? `
                            <h2 class="text-lg sm:text-xl font-semibold flex-grow pr-4">
                                <a href="${url}" 
                                   target="_blank" 
                                   rel="noopener noreferrer" 
                                   class="text-blue-600 hover:text-blue-800 hover:underline">
                                    ${title}
                                    <svg class="inline-block w-4 h-4 ml-1 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                                    </svg>
                                </a>
                            </h2>
                        ` : `
                            <h2 class="text-lg sm:text-xl font-semibold flex-grow pr-4">${title}</h2>
                        `}
                        <span class="text-gray-500">${year}</span>
                    </div>

                    <p class="text-gray-600 mb-4">${formatAuthors(paper.Author)}</p>

                    <div class="bg-gray-50 rounded p-4 mb-4">
                        <h3 class="font-semibold mb-2">Plain English Summary (AI generated)</h3>
                        <p class="text-gray-700 whitespace-pre-line">${plainExplanation}</p>
                    </div>

                    <button 
                        onclick="toggleAbstract(this)" 
                        class="inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors focus:outline-none"
                        data-expanded="false">
                        <span>Show Original Abstract & Citation</span>
                        <svg class="w-4 h-4 ml-2 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </button>

                    <div class="hidden mt-4 space-y-6 border-t pt-4">
                        <div>
                            <h3 class="font-semibold mb-2">Original Abstract</h3>
                            <p class="text-gray-700 whitespace-pre-line">${abstract}</p>
                        </div>
                        
                        <div>
                            <h3 class="font-semibold mb-2">Academic Citation</h3>
                            <p class="text-gray-700">
                                ${formatAuthors(paper.Author)} (${year}). 
                                ${title}. ${pubTitle}.
                            </p>
                        </div>
                    </div>
                </div>
            `;
        }

        // [Rest of the code remains the same]
    </script>
</body>
</html>
